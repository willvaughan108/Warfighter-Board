<!DOCTYPE html>
<html lang="en"><head>
<meta charset="UTF-8">
<title>Warfighter Board</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- REGION:settings-json START -->
<script id="settings-json" type="application/json">
{
  "version": "v0.90",
  "emailDomain": "us.navy.mil",
  "abbrevDefaults": ["time","vesselType","sensor"],
  "abbrevMax": 3,
  "pollMs": 5000,
  "autoSaveMs": 400,
  "highlights": { "mine":"#2e7d32", "others":"#1f3a93" }
}
</script>
<!-- REGION:settings-json END -->

<!-- REGION:styles START -->
<link rel="stylesheet" href="css/theme.css">
<link rel="stylesheet" href="css/main.css">
<!-- REGION:styles END -->
</head>
<body>

<!-- REGION:landing START -->
<input id="fileOpenFallback" type="file" accept="application/json" style="display:none">

<section id="landing">
  <h1 class="landing-warning">NOT APPROVED FOR USE</h1>
  <h1>Warfighter Board <span class="ver" id="versionA">v0.90</span></h1>
  <div class="landing-buttons">
    <button id="btnLandingNew" type="button">New Mission</button>
    <button id="btnLandingCollab" type="button" class="btn-secondary">Collaborate</button>
  </div>
  <div class="muted">Choose how you’d like to start.</div>
</section>
<!-- REGION:landing END -->

<!-- REGION:app START -->
<section id="app" aria-hidden="true">
  <h1>Warfighter Board <span class="ver" id="versionB">v0.90</span></h1>

  <div class="timebar" aria-live="polite">
    <span id="dateLocal">Sep 23</span><span class="sep">|</span>
    Z: <span id="timeZulu">15:31:01Z</span><span class="sep">|</span>
    EST: <span id="timeEST">11:31:01</span><span class="sep">|</span>
    PST: <span id="timePST">08:31:01</span>
  </div>

  <div id="banner" class="banner"></div>

<div class="topbar">
  <div class="pill" title="Current Name">
    <strong>Name:</strong> <span id="crewDisplay">—</span>
    <button id="changeCrewBtn" class="btn-secondary" style="margin-left:8px;">Change</button>
  </div>




  <div class="right">
  <button id="settingsBtn" class="icon-btn" title="Open Settings">⚙</button>
  <button id="suggestionBtn" title="Open Suggestion Box">Suggestion Box</button>
   <button id="exportBtn" title="Export CSV of TACREPs">Export CSV</button>
    <button id="syncSaveBtn" title="Save your changes and merge with the file on disk">Sync &amp; Save</button>
    <button id="downloadJsonBtn" style="display:none;" title="Download current mission as JSON">Download JSON</button>
    <span id="fileStatus" class="muted">No file</span>
  </div>
</div>



  <!-- NEW: Tab bar -->
  <div class="tabbar" role="tablist" aria-label="Views">
    <button class="tab"         role="tab" id="tabMD"  aria-controls="panelMD"  data-tab-target="MD"  aria-selected="false">Mission Details</button>
<button class="tab active"  role="tab" id="tabTC"  aria-controls="panelTC"  data-tab-target="TC"  aria-selected="true">TACREPs</button>

    <button class="tab"         role="tab" id="tabMPO" aria-controls="panelMPO" data-tab-target="MPO" aria-selected="false">LOG</button>
    <span id="repinTracker" class="muted" aria-live="polite" style="margin-left:auto;">BAR Re-Pins This Mission: 0</span>
  </div>

  <!-- Panel: TC (your existing board, unchanged markup inside) -->
<!-- Panel: MD (placeholder or future content) -->
<div class="tab-panel" role="tabpanel" id="panelMD" data-tab="MD" aria-labelledby="tabMD"> <div class="board" id="mdBoard"> <div class="column" data-column="MissionDetails"> <h2>Mission Details</h2> <div class="items"> <div class="item" id="crewDetailsTile" aria-label="Mission Details"> <div class="item-header"> <div class="badge-wrap"> <div class="badge">Mission Details</div> </div> <div class="item-actions"></div> </div> <div class="item-details"> <div class="cd-grid" style="width:100%;"> <!-- Header row --> <div class="cd-row cd-head"> <div class="hdr" id="md_hdr_shift">Shift</div> <div class="hdr" id="md_hdr_turn">Turnover time</div> <div class="hdr" id="md_hdr_mc">MC</div> <div class="hdr" id="md_hdr_tc">TC</div> <div class="hdr" id="md_hdr_uac">UAC</div> <div class="hdr" id="md_hdr_sc">SC</div> <div class="hdr" id="md_hdr_mpo1">MPO1</div> <div class="hdr" id="md_hdr_mpo2">MPO2</div> </div> <!-- Mission Meta (separate from Crew Details) --> <div id="md_meta_wrap"> <!-- Mission number and block start are intentionally placed above the crew details and always visible --> <div class="row tight">
  <label for="md_callsign">Callsign</label>
   <input id="md_callsign" type="text" placeholder="Callsign" aria-label="Callsign" maxlength="20">

</div>

<div class="row tight">
  <label for="md_missionNumber">Mission Number</label>
  <input id="md_missionNumber" type="text" placeholder="Mission Number" aria-label="Mission Number" maxlength="7">

</div>
 <div class="row tight"> <label for="md_blockStart">TACREP Block Start</label>
 <input id="md_blockStart" type="text" placeholder="Block Start (e.g., 100)" inputmode="numeric" pattern="[0-9]+" maxlength="10" aria-label="Block Start"> </div> </div>
      <!-- Shift 1 -->
      <div class="cd-row">
        <div id="md_row_s1">Shift 1</div>
        <input id="md_cd_s1_turn"  type="text" placeholder="" aria-labelledby="md_hdr_turn md_row_s1">
        <input id="md_cd_s1_mc"    type="text" placeholder="MC"         aria-labelledby="md_hdr_mc md_row_s1">
        <input id="md_cd_s1_tc"    type="text" placeholder="TC"         aria-labelledby="md_hdr_tc md_row_s1">
        <input id="md_cd_s1_uac"   type="text" placeholder="UAC"        aria-labelledby="md_hdr_uac md_row_s1">
                <input id="md_cd_s1_sc"    type="text" placeholder="SC"         aria-labelledby="md_hdr_sc md_row_s1">

        <input id="md_cd_s1_mpo1"  type="text" placeholder="MPO1"       aria-labelledby="md_hdr_mpo1 md_row_s1">
        <input id="md_cd_s1_mpo2"  type="text" placeholder="MPO2"       aria-labelledby="md_hdr_mpo2 md_row_s1">
      </div>

      <!-- Shift 2 -->
      <div class="cd-row">
        <div id="md_row_s2">Shift 2</div>
        <input id="md_cd_s2_turn"  type="text" placeholder="" aria-labelledby="md_hdr_turn md_row_s2">
        <input id="md_cd_s2_mc"    type="text" placeholder="MC"         aria-labelledby="md_hdr_mc md_row_s2">
        <input id="md_cd_s2_tc"    type="text" placeholder="TC"         aria-labelledby="md_hdr_tc md_row_s2">
        <input id="md_cd_s2_uac"   type="text" placeholder="UAC"        aria-labelledby="md_hdr_uac md_row_s2">
                <input id="md_cd_s2_sc"    type="text" placeholder="SC"         aria-labelledby="md_hdr_sc md_row_s2">

        <input id="md_cd_s2_mpo1"  type="text" placeholder="MPO1"       aria-labelledby="md_hdr_mpo1 md_row_s2">
        <input id="md_cd_s2_mpo2"  type="text" placeholder="MPO2"       aria-labelledby="md_hdr_mpo2 md_row_s2">
      </div>

      <!-- Shift 3 -->
      <div class="cd-row">
        <div id="md_row_s3">Shift 3</div>
        <input id="md_cd_s3_turn"  type="text" placeholder="" aria-labelledby="md_hdr_turn md_row_s3">
        <input id="md_cd_s3_mc"    type="text" placeholder="MC"          aria-labelledby="md_hdr_mc md_row_s3">
        <input id="md_cd_s3_tc"    type="text" placeholder="TC"          aria-labelledby="md_hdr_tc md_row_s3">
        <input id="md_cd_s3_uac"   type="text" placeholder="UAC"         aria-labelledby="md_hdr_uac md_row_s3">
                <input id="md_cd_s3_sc"    type="text" placeholder="SC"          aria-labelledby="md_hdr_sc md_row_s3">

        <input id="md_cd_s3_mpo1"  type="text" placeholder="MPO1"        aria-labelledby="md_hdr_mpo1 md_row_s3">
        <input id="md_cd_s3_mpo2"  type="text" placeholder="MPO2"        aria-labelledby="md_hdr_mpo2 md_row_s3">
      </div>

      <!-- Shift 4 -->
      <div class="cd-row">
        <div id="md_row_s4">Shift 4</div>
        <input id="md_cd_s4_turn"  type="text" placeholder=""         aria-labelledby="md_hdr_turn md_row_s4">
        <input id="md_cd_s4_mc"    type="text" placeholder="MC"          aria-labelledby="md_hdr_mc md_row_s4">
        <input id="md_cd_s4_tc"    type="text" placeholder="TC"          aria-labelledby="md_hdr_tc md_row_s4">
        <input id="md_cd_s4_uac"   type="text" placeholder="UAC"         aria-labelledby="md_hdr_uac md_row_s4">
                <input id="md_cd_s4_sc"    type="text" placeholder="SC"          aria-labelledby="md_hdr_sc md_row_s4">

        <input id="md_cd_s4_mpo1"  type="text" placeholder="MPO1"        aria-labelledby="md_hdr_mpo1 md_row_s4">
        <input id="md_cd_s4_mpo2"  type="text" placeholder="MPO2"        aria-labelledby="md_hdr_mpo2 md_row_s4">
      </div>
    </div>

    <div class="actions" style="margin-top:12px;">
      <button id="md_cdCancel" class="btn-secondary" type="button">Cancel</button>
      <button id="md_cdSave" type="button">Save</button>
    </div>
  </div>
</div>

</div> <button class="add-btn" type="button" disabled style="display:none;">Add New</button> </div> </div> </div>

<!-- Panel: TC (board) -->
<div class="tab-panel active" role="tabpanel" id="panelTC" data-tab="TC" aria-labelledby="tabTC">
  <div class="board" id="board">
    <div class="column" data-column="India" data-letter="I">
      <h2>India</h2><div class="items"></div><button class="add-btn" type="button" disabled>Add New</button>
    </div>
    <div class="column" data-column="Echo" data-letter="E">
      <h2>Echo</h2><div class="items"></div><button class="add-btn" type="button" disabled>Add New</button>
    </div>
    <div class="column" data-column="AIS" data-letter="AIS">
      <h2>AIS</h2><div class="items"></div><button class="add-btn" type="button" disabled>Add New</button>
    </div>
    <div class="column" data-column="Alpha" data-letter="A">
      <h2>Alpha</h2><div class="items"></div><button class="add-btn" type="button" disabled>Add New</button>
    </div>
    <div class="column" data-column="November" data-letter="N">
      <h2>November</h2><div class="items"></div><button class="add-btn" type="button" disabled>Add New</button>
    </div>
    <div class="column" data-column="Golf" data-letter="G">
      <h2>Golf</h2><div class="items"></div><button class="add-btn" type="button" disabled>Add New</button>
    </div>

    <!-- Correlations -->
    <div class="column correlations" data-column="Correlations">
      <h2>Correlations</h2>
      <div class="correlation-controls">
        <button id="correlationBtn" type="button" disabled>Add New</button>
        <button id="correlationCancelBtn" type="button" style="display:none; background:#c62828;">Cancel</button>
      </div>
      <span id="selectHint" class="muted"></span>
      <div class="items" id="correlationItems"></div>
    </div>

    <!-- Deleted -->
    <div class="column" data-column="Deleted" data-letter="DEL">
      <h2>Deleted TACREPS</h2>
      <div class="items" id="deletedItems"></div>
    </div>

    <div class="column" data-column="History">
      <h2>Change History</h2>
     <div class="items" id="historyItems"></div>

    </div>
  </div>
</div>



<!-- Panel: MPO (LOG) -->
<div class="tab-panel" role="tabpanel" id="panelMPO" data-tab="MPO" aria-labelledby="tabMPO">
  <div class="board" style="margin: 0 20px;">
    <div class="column" data-column="MissionTimeline" style="grid-column: 1 / -1; margin-top: 0;">
      <h2>Mission Timeline</h2>
      <div class="items">
        <div class="item" id="missionTimelineTile" aria-label="Mission Timeline">
          <div class="mtl-controls row tight" style="gap:8px;">
            <button type="button" id="mtl_OFFDECK">OFFDECK</button>
            <button type="button" id="mtl_ONSTA">ONSTA</button>
            <button type="button" id="mtl_OFFSTA">OFFSTA</button>
            <button type="button" id="mtl_ONDECK">ONDECK</button>
          </div>
          <div class="mtl-controls row tight" style="gap:8px; margin-top:8px;">
            <button type="button" id="mtl_FAULTS">Faults</button>
            <button type="button" id="mtl_REPIN">Log a Re-pin</button>
            <button type="button" id="mtl_MISSIONLOG">Mission Log</button>
          </div>
          <div id="missionTimelineItems"></div>
        </div>
      </div>
    </div>
  </div>
</div>

</section>

<!-- REGION:app END -->

<!-- REGION:modals START -->
  <!-- Change Type Chooser Modal -->
<div id="changeTypeModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="changeTypeTitle">
    <h3 id="changeTypeTitle">What kind of change is this?</h3>
    <div class="avp-grid" role="list" style="margin:10px 0;">
      <button class="avp-tile" id="btnChangeTypeEdit" role="listitem" type="button"><span>Edit TACREP</span></button>
      <button class="avp-tile" id="btnChangeTypeCorrect" role="listitem" type="button"><span>Correct TACREP</span></button>
      <button class="avp-tile" id="btnChangeTypeUpdate" role="listitem" type="button"><span>Update TACREP</span></button>
    </div>
    <div class="actions" style="margin-top:12px;">
      <button id="btnChangeTypeCancel" class="btn-secondary" type="button">Cancel</button>
    </div>
  </div>
</div>

<!-- Send Preview Modal (correction/update text with Copy + OK) -->
<div id="sendPreviewModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="sendPreviewTitle">
    <h3 id="sendPreviewTitle">Message Preview</h3>
    <textarea id="sendPreviewText" readonly style="width:100%;min-height:180px;font-family:monospace;"></textarea>
    <div class="actions" style="margin-top:12px;">
      <button id="sendPreviewCopyBtn" type="button" class="btn-secondary">Copy</button>
      <button id="sendPreviewOkBtn" type="button">OK</button>
    </div>
  </div>
</div>

  <!-- Export / CSV Preview Modal --> <div id="exportModal" class="modal" aria-hidden="true"> <div class="content" role="dialog" aria-modal="true" aria-labelledby="exportTitle"> <h3 id="exportTitle">Export Preview</h3>
 <h4 style="margin:8px 0;">Mission Details</h4> <table class="tbl" id="exportTblMissionMeta"> <tbody id="exportBodyMissionMeta"></tbody> </table> <table class="tbl" id="exportTblCrewDetails">
  <thead>
    <tr>
      <th></th>
      <th>Turnover</th>
      <th>MC</th>
      <th>TC</th>
      <th>UAC</th>
      <th>SC</th>
      <th>MPO1</th>
      <th>MPO2</th>
    </tr>
  </thead>
 <tbody id="exportBodyCrewDetails"></tbody> </table>
<h4 style="margin:8px 0;">TACREPs</h4>
<div id="exportTacrepsGrouped"></div>

<h4 style="margin:14px 0 8px;">Mission Timeline</h4>
<table class="tbl" id="exportTblTimeline">
  <thead>
    <tr>
      <th>Time</th>
      <th>Type</th>
      <th>Airfield</th>
      <th>Lat</th>
      <th>Lon</th>
      <th>Altitude</th>
      <th>CreatedBy</th>
      <th>CreatedAt</th>
    </tr>
  </thead>
  <tbody id="exportBodyTimeline"></tbody>
</table>

<div class="actions" style="margin-top:12px;">
  <button id="exportCloseBtn" class="btn-secondary" type="button">Close</button>
  <button id="exportDownloadBtn" type="button">Download CSV</button>
</div>

</div> </div>
<div id="crewModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="crewTitle">
    <h3 id="crewTitle">Enter Name</h3>
    <label for="crewInput">Name</label>
    <input type="text" id="crewInput" placeholder="e.g., Craig Mattingly">
    <div class="actions">
      <button id="crewCancel" class="btn-secondary" type="button">Cancel</button>
      <button id="crewApply" type="button">Apply</button>
    </div>
  </div>
</div>

<div id="blockModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="blockTitle">
    <h3 id="blockTitle">Set Block Start</h3>
    <label for="blockInput">Block Start (number)</label>
    <input type="text" id="blockInput" placeholder="0000000000" maxlength="10" inputmode="numeric" pattern="[0-9]{1,10}" required>
    <div class="actions">
      <button id="blockCancel" class="btn-secondary" type="button">Cancel</button>
      <button id="blockApply" type="button">Apply</button>
    </div>
  </div>
</div>


<div id="entryModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="row tight" id="entryHeaderRow" style="align-items:center; margin-bottom:10px;">
  <h3 id="modalTitle" style="margin:0; flex:1;">New TACREP</h3>
  <button type="button" id="reportedBtn" class="btn-secondary" style="font-weight:bold; flex:0 0 50%;">UNREPORTED</button>
</div>
    <form id="entryForm">
      <input type="hidden" id="targetColumn">
      <input type="hidden" id="editingCode">

      <div id="codeEditRow" class="row" style="display:none;">
        <div>
          <label for="codePrefix">TACREP Prefix</label>
          <input type="text" id="codePrefix" disabled>
        </div>
        <div>
          <label for="codeNumber">TACREP Number</label>
          <input type="text" id="codeNumber" inputmode="numeric" placeholder="e.g., 304">
        </div>
      </div>

      <label for="timeZuluInput">Time (Zulu)</label>
      <div class="row tight inline-check">
        <input type="text" id="timeZuluInput" placeholder="HHMM" inputmode="numeric" pattern="[0-9]{4}" maxlength="4" required>
        <button type="button" id="makeCurrentBtn" class="btn-secondary">Make Current</button>
        <input type="checkbox" class="abbrChk" data-field="time" title="Include in abbreviation">
      </div>

      <label for="vesselType">Vessel Type</label>
      <!-- Echo-only fields: System/Platform, Emitter, Activity/Function, Frequency -->

<label for="echoSystem" class="echo-only" style="display:none;">System or Platform</label>

<div class="row tight inline-check echo-only" style="display:none;"> <input type="text" id="echoSystem" placeholder="e.g., ELINT Drone"> <input type="checkbox" class="abbrChk" data-field="systemOrPlatform" title="Include in abbreviation"> </div>

<label for="echoEmitter" class="echo-only" style="display:none;">Emitter Name</label>

<div class="row tight inline-check echo-only" style="display:none;"> <input type="text" id="echoEmitter" placeholder="e.g., RSN-123"> <input type="checkbox" class="abbrChk" data-field="emitterName" title="Include in abbreviation"> </div>

<label for="echoActivity" class="echo-only" style="display:none;">Activity or Function</label>

<div class="row tight inline-check echo-only" style="display:none;"> <input type="text" id="echoActivity" placeholder="e.g., coastal search"> <input type="checkbox" class="abbrChk" data-field="activityOrFunction" title="Include in abbreviation"> </div>

<label for="echoFreq" class="echo-only" style="display:none;">Frequency</label>

<div class="row tight inline-check echo-only" style="display:none;"> <input type="text" id="echoFreq" placeholder="e.g., 9.375" inputmode="decimal" pattern="[0-9]+\.?[0-9]*"> <select id="echoFreqUnit"><option>MHz</option><option>GHz</option></select> <input type="checkbox" class="abbrChk" data-field="frequency" title="Include in abbreviation"> </div>
      <div class="row tight inline-check">
        <input type="text" id="vesselType" placeholder="Poss Combatant">
        <input type="checkbox" class="abbrChk" data-field="vesselType" title="Include in abbreviation">
      </div>

      <label for="vesselName" class="ais-only" style="display:none;">Vessel Name</label>
      <div class="row tight inline-check ais-only" style="display:none;">
        <input type="text" id="vesselName" placeholder="e.g., EVER GIVEN">
        <input type="checkbox" class="abbrChk" data-field="vesselName" title="Include in abbreviation">
      </div>

      <label for="mmsi" class="ais-only" style="display:none;">MMSI</label>
      <div class="row tight inline-check ais-only" style="display:none;">
        <input type="text" id="mmsi" placeholder="e.g., 123456789" inputmode="numeric" pattern="[0-9]{9}" maxlength="9">
        <input type="checkbox" class="abbrChk" data-field="mmsi" title="Include in abbreviation">
      </div>

      <label for="vesselFlag" class="ais-only" style="display:none;">Vessel Flag</label>
      <div class="row tight inline-check ais-only" style="display:none;">
        <input type="text" id="vesselFlag" placeholder="e.g., Panama">
        <input type="checkbox" class="abbrChk" data-field="vesselFlag" title="Include in abbreviation">
      </div>

      <label for="imo" class="ais-only" style="display:none;">IMO</label>
      <div class="row tight inline-check ais-only" style="display:none;">
        <input type="text" id="imo" placeholder="e.g., 9319466" inputmode="numeric" pattern="[0-9]{7}" maxlength="7">
        <input type="checkbox" class="abbrChk" data-field="imo" title="Include in abbreviation">
      </div>

      <label for="sensor">Sensor</label>
      <div class="row tight inline-check">
        <input type="text" id="sensor" placeholder="e.g., Radar, EO/IR">
        <input type="checkbox" class="abbrChk" data-field="sensor" title="Include in abbreviation">
      </div>

<label>Latitude (D° M' S.SS")</label>
<div class="row tight">
  <input type="text" id="latDeg" placeholder="Deg" inputmode="numeric" maxlength="2">
  <input type="text" id="latMin" placeholder="Min" inputmode="numeric" maxlength="2">
  <input type="text" id="latSec" placeholder="Sec" inputmode="numeric" maxlength="2">
  <span class="dot" aria-hidden="true">.</span>
  <input type="text" id="latDecSec" placeholder="Dec Sec" inputmode="numeric" maxlength="2">
  <select id="latHem"><option value="N">N</option><option value="S">S</option></select>
</div>


  <label>Longitude (D° M' S.SS")</label>
<div class="row tight inline-check">
  <input type="text" id="lonDeg" placeholder="Deg" inputmode="numeric" maxlength="3">
  <input type="text" id="lonMin" placeholder="Min" inputmode="numeric" maxlength="2">
  <input type="text" id="lonSec" placeholder="Sec" inputmode="numeric" maxlength="2">
  <span class="dot" aria-hidden="true">.</span>
  <input type="text" id="lonDecSec" placeholder="Dec Sec" inputmode="numeric" maxlength="2">
  <select id="lonHem"><option value="E">E</option><option value="W">W</option></select>
  <input type="checkbox" class="abbrChk" data-field="position" title="Include in abbreviation">
</div>


    <label for="course">Course</label>
      <div class="row tight inline-check">
        <input type="text" id="course" inputmode="numeric" placeholder="e.g., 270" pattern="[0-9]{1,3}" maxlength="3">
        <input type="checkbox" class="abbrChk" data-field="course" title="Include in abbreviation">
      </div>

           <label for="speed">Speed</label>

      <div class="row tight inline-check">
        <input type="text" id="speed" placeholder="e.g., 12.5" inputmode="decimal" pattern="[0-9]+\.?[0-9]*">
        <input type="checkbox" class="abbrChk" data-field="speed" title="Include in abbreviation">
      </div>

          <label for="trackNumber">Track Number</label>

      <div class="row tight inline-check">
        <input type="text" id="trackNumber" placeholder="e.g., T001">
        <input type="checkbox" class="abbrChk" data-field="trackNumber" title="Include in abbreviation">
      </div>

      <label for="minVesselLen">Min vessel length (ft)</label>
      <div class="row tight inline-check">
        <input type="text" id="minVesselLen" placeholder="e.g., 120" inputmode="numeric" pattern="[0-9]+" maxlength="4">
        <input type="checkbox" class="abbrChk" data-field="minVesselLen" title="Include in abbreviation">
      </div>

      <label for="additionalInfo">Additional Info</label>
      <div class="row tight inline-check">
        <textarea id="additionalInfo" placeholder="Additional information..." rows="3"></textarea>
        <input type="checkbox" class="abbrChk" data-field="additionalInfo" title="Include in abbreviation">
      </div>

      <label for="minotaurPaste">Minotaur Paste</label>
      <div class="row tight">
        <textarea id="minotaurPaste" placeholder="Paste Minotaur data..." rows="3"></textarea>
        <button type="button" id="minoCheckBtn" class="btn-ok" title="Parse Minotaur">Parse</button>
      </div>

      <div class="actions">
        <button type="button" id="cancelEntryBtn" class="btn-secondary">Cancel</button>
        <button type="submit" id="saveBtn">Save</button>
      </div>
      <div class="muted" id="tacrepDemo" style="margin-top:10px;">TACREP DEMO: Trk#: MM0001 (LTN: 03000) 09/25/2025 05:23:02.5 UTC 19:32:25.15N 128:23:17.68E 12 kt @ 328.0T deg</div>
    </form>
  </div>
</div>


<div id="confirmModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <h3 id="confirmTitle">Confirm</h3>
    <p id="confirmText" style="margin-top:0;"></p>
    <div class="actions">
      <button type="button" id="confirmCancelBtn" class="btn-secondary">Cancel</button>
      <button type="button" id="confirmOkBtn" class="btn-danger">OK</button>
    </div>
  </div>
</div>

<div id="suggestionModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="sbTitle">
    <h3 id="sbTitle">Suggestion Box</h3>
    <form id="suggestionForm">
      <div class="contact-message">
        For questions or suggestions:<br>
        LT William Vaughan<br>
        VP30<br>
        William.E.Vaughn45.mil@us.navy.mil
      </div>
      <div class="actions" style="margin-top:12px;">
        <button type="button" id="sb-cancel" class="btn-secondary">Close</button>
      </div>
    </form>
  </div>
</div>
<div id="settingsModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <h3 id="settingsTitle">Settings</h3>
    <div class="settings-body">
      <button type="button" id="openTacrepFormatBtn">TACREP Format</button>
      <button type="button" id="openPositionFormatBtn">Position Format</button>
      <div class="muted" id="positionFormatSummary" style="margin-top:8px;"></div>
    </div>
    <div class="actions">
      <button type="button" id="settingsCloseBtn" class="btn-secondary">Close</button>
    </div>
  </div>
</div>
<div id="tacrepFormatModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="tacrepFormatTitle">
    <h3 id="tacrepFormatTitle">TACREP Format</h3>
    <p class="muted" style="margin:4px 0 12px;">Use the arrows below each field to adjust the display order.</p>
    <div id="tacrepFormatContainer" class="tacrep-format-container" role="list"></div>
    <div class="actions">
      <button type="button" id="tacrepFormatCancelBtn" class="btn-secondary">Close</button>
      <button type="button" id="tacrepFormatResetBtn">Reset to Default</button>
    </div>
  </div>
</div>
<div id="positionFormatModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="positionFormatTitle">
    <h3 id="positionFormatTitle">Position Format</h3>
    <form id="positionFormatForm">
      <div class="position-format-option">
        <label>
          <input type="radio" name="positionFormatChoice" value="MGRS">
          <strong>MGRS</strong> — Military Grid Reference System<br>
          <span class="muted">Format: grid zone + 100 km square + easting northing (e.g., 18SUJ 23480 06470)</span>
        </label>
      </div>
      <div class="position-format-option" style="margin-top:10px;">
        <label>
          <input type="radio" name="positionFormatChoice" value="DMS">
          <strong>DMS</strong> — Degrees Minutes Seconds<br>
          <span class="muted">Format: DD&deg; MM&prime; SS&Prime; (e.g., 36&deg; 51&prime; 31&Prime; N, 121&deg; 45&prime; 15&Prime; W)</span>
        </label>
      </div>
      <div class="position-format-option" style="margin-top:10px;">
        <label>
          <input type="radio" name="positionFormatChoice" value="DM.M">
          <strong>DM.M</strong> — Degrees and decimal minutes<br>
          <span class="muted">Format: DD&deg; MM.mmm&prime; (e.g., 36&deg; 51.528&prime; N, 121&deg; 45.253&prime; W)</span>
        </label>
      </div>
      <div class="position-format-option" style="margin-top:10px;">
        <label>
          <input type="radio" name="positionFormatChoice" value="D.DD">
          <strong>D.DD</strong> — Decimal degrees<br>
          <span class="muted">Format: DD.dddddd&deg; (e.g., 36.8588&deg; N, &minus;121.7542&deg;)</span>
        </label>
      </div>
      <div class="actions" style="margin-top:12px;">
        <button type="button" id="positionFormatCancelBtn" class="btn-secondary">Cancel</button>
        <button type="submit" id="positionFormatSaveBtn">Save</button>
      </div>
    </form>
  </div>
</div>
<div id="crewDetailsModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="cdTitle">
<h3 id="cdTitle">Mission Details</h3>


    <div class="cd-grid">
      <!-- Header row -->
   
      <div class="cd-row cd-head">
        <div class="hdr" id="hdr_shift">Shift</div>
        <div class="hdr" id="hdr_turn">Turnover time</div>
        <div class="hdr" id="hdr_mc">MC</div>
        <div class="hdr" id="hdr_tc">TC</div>
        <div class="hdr" id="hdr_uac">UAC</div>
        <div class="hdr" id="hdr_sc">SC</div>
        <div class="hdr" id="hdr_mpo1">MPO1</div>
        <div class="hdr" id="hdr_mpo2">MPO2</div>
      </div>

      <!-- Shift 1 -->
      <div class="cd-row">
        <div id="row_s1">Shift 1</div>
        <input id="cd_s1_turn"  type="text" placeholder="" aria-labelledby="hdr_turn row_s1">
        <input id="cd_s1_mc"    type="text" placeholder="MC"         aria-labelledby="hdr_mc row_s1">
        <input id="cd_s1_tc"    type="text" placeholder="TC"         aria-labelledby="hdr_tc row_s1">
        <input id="cd_s1_uac"   type="text" placeholder="UAC"        aria-labelledby="hdr_uac row_s1">
            <input id="cd_s1_sc"    type="text" placeholder="SC"         aria-labelledby="hdr_sc row_s1">

        <input id="cd_s1_mpo1"  type="text" placeholder="MPO1"       aria-labelledby="hdr_mpo1 row_s1">
        <input id="cd_s1_mpo2"  type="text" placeholder="MPO2"       aria-labelledby="hdr_mpo2 row_s1">
      </div>

      <!-- Shift 2 -->
      <div class="cd-row">
        <div id="row_s2">Shift 2</div>
        <input id="cd_s2_turn"  type="text" placeholder="" aria-labelledby="hdr_turn row_s2">
        <input id="cd_s2_mc"    type="text" placeholder="MC"         aria-labelledby="hdr_mc row_s2">
        <input id="cd_s2_tc"    type="text" placeholder="TC"         aria-labelledby="hdr_tc row_s2">
        <input id="cd_s2_uac"   type="text" placeholder="UAC"        aria-labelledby="hdr_uac row_s2">
           <input id="cd_s2_sc"    type="text" placeholder="SC"         aria-labelledby="hdr_sc row_s2">

        <input id="cd_s2_mpo1"  type="text" placeholder="MPO1"       aria-labelledby="hdr_mpo1 row_s2">
        <input id="cd_s2_mpo2"  type="text" placeholder="MPO2"       aria-labelledby="hdr_mpo2 row_s2">
      </div>

      <!-- Shift 3 -->
      <div class="cd-row">
        <div id="row_s3">Shift 3</div>
        <input id="cd_s3_turn"  type="text" placeholder="" aria-labelledby="hdr_turn row_s3">
        <input id="cd_s3_mc"    type="text" placeholder="MC"          aria-labelledby="hdr_mc row_s3">
        <input id="cd_s3_tc"    type="text" placeholder="TC"          aria-labelledby="hdr_tc row_s3">
        <input id="cd_s3_uac"   type="text" placeholder="UAC"         aria-labelledby="hdr_uac row_s3">
            <input id="cd_s3_sc"    type="text" placeholder="SC"          aria-labelledby="hdr_sc row_s3">

        <input id="cd_s3_mpo1"  type="text" placeholder="MPO1"        aria-labelledby="hdr_mpo1 row_s3">
        <input id="cd_s3_mpo2"  type="text" placeholder="MPO2"        aria-labelledby="hdr_mpo2 row_s3">
      </div>

      <!-- Shift 4 -->
      <div class="cd-row">
        <div id="row_s4">Shift 4</div>
        <input id="cd_s4_turn"  type="text" placeholder=""         aria-labelledby="hdr_turn row_s4">
        <input id="cd_s4_mc"    type="text" placeholder="MC"          aria-labelledby="hdr_mc row_s4">
        <input id="cd_s4_tc"    type="text" placeholder="TC"          aria-labelledby="hdr_tc row_s4">
        <input id="cd_s4_uac"   type="text" placeholder="UAC"         aria-labelledby="hdr_uac row_s4">
            <input id="cd_s4_sc"    type="text" placeholder="SC"          aria-labelledby="hdr_sc row_s4">

        <input id="cd_s4_mpo1"  type="text" placeholder="MPO1"        aria-labelledby="hdr_mpo1 row_s4">
        <input id="cd_s4_mpo2"  type="text" placeholder="MPO2"        aria-labelledby="hdr_mpo2 row_s4">
      </div>
    </div>

    <div class="actions" style="margin-top:12px;">
      <button id="cdCancel" class="btn-secondary" type="button">Cancel</button>
      <button id="cdSave" type="button">Save</button>
    </div>
  </div>
</div>
<div id="faultsModal" class="modal" aria-hidden="true"> <div class="content" role="dialog" aria-modal="true" aria-labelledby="faultsTitle"> <h3 id="faultsTitle">Faults</h3>
<label for="faultTime">Time (Zulu)</label>
<div class="row tight inline-check">
  <input id="faultTime" type="text" placeholder="HHMM" inputmode="numeric" pattern="[0-9]{4}" maxlength="4">
  <button id="faultTimeCurrent" type="button" class="btn-secondary">Current</button>
</div>

<label for="faultCode">Fault Code</label>
<input id="faultCode" type="text" placeholder="e.g., F123">

<label for="faultComments">Comments</label>
<textarea id="faultComments" placeholder="Details..." rows="3"></textarea>

<div class="actions" style="margin-top:12px;"> <button id="faultsCancel" class="btn-secondary" type="button">Cancel</button> <button id="faultsSave" type="button">Save</button> </div>
</div></div>

<!-- TACREP History Modal -->
<div id="tacrepHistoryModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="tacrepHistoryTitle">
    <h3 id="tacrepHistoryTitle">TACREP History</h3>
    <div id="tacrepHistoryContent" class="tacrep-history-container">
      <!-- History versions will be inserted here -->
    </div>
    <div class="actions" style="margin-top:12px;">
      <button id="tacrepHistoryCloseBtn" class="btn-secondary" type="button">Close</button>
    </div>
  </div>
</div>
<div id="repinModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="repinTitle">
    <h3 id="repinTitle">Log a Re-pin</h3>
    <form id="repinForm">
      <label for="repinTime">Time (Zulu)</label>
      <div class="row tight" style="gap:8px;">
        <input id="repinTime" type="text" placeholder="HHMM" inputmode="numeric" pattern="[0-9]{4}" maxlength="4" required>
        <button id="repinTimeCurrent" type="button" class="btn-secondary">Current</button>
      </div>
      <label for="repinFault">Associated Fault</label>
      <input id="repinFault" type="text" placeholder="Fault code or description">
      <div class="actions" style="margin-top:12px;">
        <button id="repinCancel" type="button" class="btn-secondary">Cancel</button>
        <button id="repinSave" type="submit">Save</button>
      </div>
    </form>
  </div>
</div>
<!-- Mission Log Modal -->
<div id="missionLogModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="missionLogTitle">
    <h3 id="missionLogTitle">Mission Log Entry</h3>
    <form id="missionLogForm">
      <label for="mlTime">Time (Zulu)</label>
      <div class="row tight" style="gap:8px;">
        <input id="mlTime" type="text" placeholder="HHMM" inputmode="numeric" pattern="[0-9]{4}" maxlength="4" required>
        <button id="mlTimeCurrent" type="button" class="btn-secondary">Current</button>
      </div>

      <label for="mlComments">Comments</label>
      <textarea id="mlComments" placeholder="Enter comments..." rows="4"></textarea>

      <div class="actions" style="margin-top:12px;">
        <button id="mlCancel" type="button" class="btn-secondary">Cancel</button>
        <button id="mlSave" type="submit">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- Mission Timeline Fault Modal -->
<div id="timelineFaultModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="timelineFaultTitle">
    <h3 id="timelineFaultTitle">Log Fault</h3>
    <form id="timelineFaultForm">
      <label for="tfTime">Time (Zulu)</label>
      <div class="row tight" style="gap:8px;">
        <input id="tfTime" type="text" placeholder="HHMM" inputmode="numeric" pattern="[0-9]{4}" maxlength="4" required>
        <button id="tfTimeCurrent" type="button" class="btn-secondary">Current</button>
      </div>

      <label for="tfCode">Fault</label>
      <input id="tfCode" type="text" placeholder="e.g., Generator offline">

      <label for="tfComments">Comments</label>
      <textarea id="tfComments" rows="3" placeholder="Details..."></textarea>

      <div class="actions" style="margin-top:12px;">
        <button id="tfCancel" type="button" class="btn-secondary">Cancel</button>
        <button id="tfSave" type="submit">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- REGION:modals END -->
<div id="offDeckModal" class="modal" aria-hidden="true">
  <div class="content" role="dialog" aria-modal="true" aria-labelledby="offDeckTitle">
    <h3 id="offDeckTitle">New Off Deck Report</h3>
    <form id="offDeckForm">
      <label for="odTime">Time (Zulu)</label>
      <div class="row tight inline-check">
        <input id="odTime" type="text" placeholder="HHMM" inputmode="numeric" pattern="[0-9]{4}" maxlength="4">
        <button id="odTimeCurrent" type="button" class="btn-secondary">Current</button>
      </div>

      <label for="odAirfield">Airfield</label>
      <input id="odAirfield" type="text" placeholder="e.g., Kadena">

      <div class="actions" style="margin-top:12px;">
        <button id="odCancel" class="btn-secondary" type="button">Cancel</button>
        <button id="odSave" type="submit">Save</button>
      </div>
    </form>
  </div>
</div>
  <!-- REGION:modals END -->
<div id="onStaModal" class="modal" aria-hidden="true"> <div class="content" role="dialog" aria-modal="true" aria-labelledby="onStaTitle"> <h3 id="onStaTitle">New ONSTA Report</h3> <form id="onStaForm"> <label for="osTime">Time (Zulu)</label> <div class="row tight inline-check"> <input id="osTime" type="text" placeholder="HHMM" inputmode="numeric" pattern="[0-9]{4}" maxlength="4"> <button id="osTimeCurrent" type="button" class="btn-secondary">Current</button> </div>
<label>Latitude (D° M' S.SS")</label>
<div class="row tight">
  <input type="text" id="osLatDeg" placeholder="Deg" inputmode="numeric" maxlength="2">
  <input type="text" id="osLatMin" placeholder="Min" inputmode="numeric" maxlength="2">
  <input type="text" id="osLatSec" placeholder="Sec" inputmode="numeric" maxlength="2">
  <span class="dot" aria-hidden="true">.</span>
  <input type="text" id="osLatDecSec" placeholder="Dec Sec" inputmode="numeric" maxlength="2">
  <select id="osLatHem"><option value="N">N</option><option value="S">S</option></select>
</div>

<label>Longitude (D° M' S.SS")</label>
<div class="row tight">
  <input type="text" id="osLonDeg" placeholder="Deg" inputmode="numeric" maxlength="3">
  <input type="text" id="osLonMin" placeholder="Min" inputmode="numeric" maxlength="2">
  <input type="text" id="osLonSec" placeholder="Sec" inputmode="numeric" maxlength="2">
  <span class="dot" aria-hidden="true">.</span>
  <input type="text" id="osLonDecSec" placeholder="Dec Sec" inputmode="numeric" maxlength="2">
  <select id="osLonHem"><option value="E">E</option><option value="W">W</option></select>
</div>


  <label for="osAlt">Altitude</label>
  <input id="osAlt" type="text" placeholder="e.g., 12500">

  <div class="actions" style="margin-top:12px;">
    <button id="osCancel" class="btn-secondary" type="button">Cancel</button>
    <button id="osSave" type="submit">Save</button>
  </div>
</form>

</div> </div>
<!-- REGION:scripts/engine START -->
<script src="js/config.js"></script>
<script src="js/utils.js"></script>
<script src="js/app.js"></script>
<!-- REGION:scripts/engine END -->


</body></html>



